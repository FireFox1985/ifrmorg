<style>
  #header a#settings_link:link {
    border-bottom: 1px solid #ffffff;
  }
</style>

<script type="text/javascript">
  jQuery(function () {
     jQuery("#user_location").autocomplete({
      source: function (request, response) {
       jQuery.getJSON(
        "http://gd.geobytes.com/AutoCompleteCity?callback=?&q="+request.term,
        function (data) {
         response(data);
        }
       );
      },
      minLength: 3,
      select: function (event, ui) {
       var selectedObj = ui.item;
       jQuery("#user_location").val(selectedObj.value);
       return false;
      },
      open: function () {
       jQuery(this).removeClass("ui-corner-all").addClass("ui-corner-top");
      },
      close: function () {
       jQuery(this).removeClass("ui-corner-top").addClass("ui-corner-all");
      }
     });
     jQuery("#search_location").autocomplete("option", "delay", 100);
  });
</script>

<%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
  <%= devise_error_messages! %>

  <div class="field"><%= f.label "First Name" %><br />
  <%= f.text_field :firstname, autofocus: true %></div>

  <div class="field"><%= f.label "Last Name" %><br />
  <%= f.text_field :lastname %></div>

  <div class="field"><%= f.label :location %><br />
  <%= f.text_field :location %></div>

  <div class="field"><%= f.label :email %><br />
  <%= f.email_field :email %></div>

  <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
    <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
  <% end %>

  <div class="field"><%= f.label :password %> <i>(leave blank if you don't want to change it)</i><br />
    <%= f.password_field :password, autocomplete: "off" %></div>

  <div class="field"><%= f.label :password_confirmation %><br />
    <%= f.password_field :password_confirmation, autocomplete: "off" %></div>

  <div class="field"><%= f.label :current_password %> <i>(we need your current password to confirm your changes)</i><br />
    <%= f.password_field :current_password, autocomplete: "off" %></div>

  <div class="actions"><%= f.submit "Update" %></div>
<% end %>

<% #button_to "Cancel my account", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete %>

