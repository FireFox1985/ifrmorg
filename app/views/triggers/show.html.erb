<p>
  <strong>Category:</strong>
  <% @trigger.category.each do |item| %>
    <%= Category.where(:id => item.to_i).first.name %>
    <% if item != @trigger.category.last %>
      <%= ', ' %>
    <% end %>
  <% end %>
</p>

<p>
  <strong>Name:</strong>
  <%= @trigger.name %>
</p>

<p>
  <strong>Mood:</strong>
  <% @trigger.mood.each do |item| %>
    <%= Mood.where(:id => item.to_i).first.name %>
    <% if item != @trigger.mood.last %>
      <%= ', ' %>
    <% end %>
  <% end %>
</p>

<p>
  <strong>Why:</strong>
  <%= @trigger.why %>
</p>

<p>
  <strong>Fix:</strong>
  <%= @trigger.fix %>
</p>

<% if current_user.id == @trigger.userid %>
  <%= link_to 'Edit', edit_trigger_path(@trigger) %> 
<% end %>

<% if current_user.id == @trigger.userid || @no_hide_page %>

  <%= form_for @comment, :url => { :action => "comment" }, :html => { :method => "post" } do |f| %>
    <% if @comment.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@comment.errors.count, "error") %> prohibited this comment from being saved:</h2>
        <ul>
        <% @comment.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field">
      <%= f.label :comment %><br />
      <%= f.text_area :comment %>
    </div>

    <div class="actions">
      <%= f.hidden_field :comment_type, :value => 'trigger' %>  
      <%= f.hidden_field :comment_by, :value => current_user.id %>  
      <%= f.hidden_field :commented_on, :value => @trigger.id %>  
      <%= f.submit %>
    </div>
  <% end %>

  <% @comments.each do |comment| %>
    <p>
      Posted by: <%= User.where(:id => comment.comment_by).first.firstname %> <%= User.where(:id => comment.comment_by).first.lastname %>
      <br /><br />
      <%= comment.comment %>
    </p>
  <% end %>

<% end %>
